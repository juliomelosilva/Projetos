<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Card√°pio Quentinhas</title>
  <link rel="shortcut icon" href="Fotos/Card√°pio/Logotipo Doceria.ico" type="image/x-icon" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap');
    @font-face {
      font-family: 'kiss';
      src: url(Fotos/Quentinha/Kissing\ Season.ttf) format(truetype);
      font-weight: normal;
      font-style: normal;
    }

    body {
      font-family: Montserrat, Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: url('Fotos/Quentinha/Fundo.jpg') no-repeat center center fixed;
      background-size: cover;
      position: relative;
    }

    h1, h2, h3 {
      font-family: 'kiss', Montserrat, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    h1 { font-size: 75px; }
    h2 { font-size: 55px; }
    h3 { font-size: 40px; }

    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: -1;
    }

    .logo {
      max-width: 150px;
      margin: 20px auto;
      display: block;
      border-radius: 50%;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      padding: 10px;
    }

    .card {
      border: 1px solid #000000;
      padding: 10px;
      border-radius: 10px;
      background: #ffffff98;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Arredondamento das imagens melhorado */
    .card img {
      width: 100%;
      height: auto;
      border-radius: 25px;
      cursor: pointer;
    }

    /* Tamanho dos campos de varia√ß√£o */
    .card select, .card input[type="number"] {
      max-width: 90px;
      padding: 3px;
      font-size: 12px;
    }

    .card button {
      background: #ff69b4;
      color: white;
      padding: 10px;
      border-radius: 20px;
      cursor: pointer;
      margin-top: 10px;
    }

    /* Layout lado a lado das varia√ß√µes */
    .variacoes-grid {
      display: flex;
      flex-direction: column;
      gap: 6px;
      width: 100%;
      align-items: center;
    }

    .variacoes-linha {
      display: flex;
      align-items: center;
      gap: 6px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .variacoes-linha label {
      font-size: 13px;
      font-weight: bold;
    }

    .sacola {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #dddddd;
      background: #ffffffda;
      border-radius: 10px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .sacola button {
      background: #ff69b4;
      color: white;
      padding: 10px;
      border-radius: 5px;
      margin: 5px;
      cursor: pointer;
      border: none;
      font-weight: bold;
    }

    .pagamento {
      margin-top: 20px;
      text-align: left;
      max-width: 400px;
      margin: 20px auto 0 auto;
      background: #fff;
      padding: 15px;
      border-radius: 10px;
    }

    .pagamento select,
    .pagamento input,
    .pagamento textarea {
      width: 100%;
      padding: 5px;
      margin-top: 5px;
      margin-bottom: 10px;
    }

    .pix-info {
      background: #eee;
      padding: 10px;
      border-radius: 5px;
      user-select: all;
    }

    .taxa-cartao-msg, .taxa-pix-msg {
      color: red;
      font-weight: bold;
      display: none;
      margin-bottom: 10px;
    }

    /* Modal b√°sico */
    #modalSelecao {
      display: none;
      position: fixed;
      top:0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #modalConteudo {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 320px;
      max-width: 90%;
      text-align: left;
    }
    #modalConteudo h3 {
      margin-top: 0;
      text-align: center;
    }
    #modalConteudo select, #modalConteudo input {
      width: 100%;
      margin-bottom: 15px;
      padding: 8px;
      font-size: 14px;
      box-sizing: border-box;
    }
    #modalBotoes {
      display: flex;
      justify-content: space-between;
    }
    #modalBotoes button {
      padding: 8px 15px;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      background: #ff69b4;
      color: white;
      font-weight: bold;
      width: 48%;
    }
  </style>
</head>
<body>
  <h1>Card√°pio</h1>
  <div class="container" id="menu"></div>

  <!-- Modal Sele√ß√£o -->
  <div id="modalSelecao">
    <div id="modalConteudo">
      <h3 id="modalTitulo"></h3>
      <div id="modalVariacoes"></div>
      <div id="modalBotoes">
        <button id="btnCancelar">Cancelar</button>
        <button id="btnConfirmar">Confirmar</button>
      </div>
    </div>
  </div>

  <div class="sacola" id="sacola">
    <h2>Sacola</h2>
    <ul id="listaSacola"></ul>
    <p><strong>Total:</strong> <span id="totalSacola">R$ 0,00</span></p>

    <div class="pagamento">
      <label for="formaPagamento">Forma de Pagamento:</label>
      <select id="formaPagamento" onchange="atualizarPagamento()">
        <option value="">Selecione</option>
        <option value="dinheiro">Dinheiro</option>
        <option value="cartao">Cart√£o de Cr√©dito/D√©bito</option>
        <option value="pix">Pix</option>
      </select>

      <div class="taxa-cartao-msg" id="taxaCartaoMsg">R$1,00 (Juros Maquineta)</div>
      

      <div id="trocoDiv" style="display:none;">
        <label>Precisa de troco?</label>
        <input type="text" id="trocoValor" placeholder="Ex: Troco para R$ 100,00" />
      </div>

      <div id="pixDiv" style="display:none;">
        <label>Chave PIX:</label>
        <div class="pix-info">82 9 2000 4574</div>
        <div class="taxa-pix-msg" id="taxaPixMsg">Por gentileza, enviar comprovante na conversa do whatsapp</div>
      </div>

      <label for="endereco">Endere√ßo de Entrega:</label>
      <textarea id="endereco" rows="2" placeholder="Digite seu endere√ßo completo e pontos de refer√™ncia"></textarea>

      <label for="observacao">Observa√ß√µes:</label>
      <textarea id="observacao" rows="2" placeholder="Ex: Sem cebola, pouco sal, sem macarr√£o"></textarea>
    </div>

    <button onclick="finalizarPedido()">Finalizar Pedido</button>
    <button onclick="limparSacola()">Limpar Sacola</button>
  </div>

  <script>
    let sacola = [];
    const taxaCartao = 1.00;

    const produtos = [
     // { op√ß√£o de carne que n√£o ser√° usada nesse momento, s√≥ tirar coment√°rio para ativar
       //  id: "quentinha1",
        // nome: "Carne Guisada",
       //  precoBase: 15,
       //  img: "Fotos/Quentinha/Carne.png",
       //  variacoes: [
       //    { nome: "Op√ß√£o de Feij√£o", opcoes: ["Tropeiro", "Caseiro"] }
       //  ]
   //   }
      {
        id: "quentinha2",
        nome: "Quentinha",
        precoBase: 15,
        img: "Fotos/Quentinha/quentinha.jpg",
        variacoes: [
          { nome: "Op√ß√£o de Frango", opcoes: ["Coxa e Sobrecoxa Forno", "Fil√© Empanado"] },
          { nome: "Op√ß√£o de Feij√£o", opcoes: ["Tropeiro", "Caseiro"] }
        ]
      },
      {
        id: "quentinha3",
        nome: "Carnes Adicionais",
        precoBase: 0,
        img: "Fotos/Quentinha/Adicionais.png",
        variacoes: [
          {
            nome: "Carnes",
            opcoes: ["Fil√© Empanado", "Coxa e Sobrecoxa Forno"],
            preco: 5.00,
            quantidade: true
          }
        ]
      }
    ];

    // Renderizar o menu
    function renderizarMenu() {
      const container = document.getElementById("menu");
      container.innerHTML = "";
      produtos.forEach((produto, index) => {
        let variacoesHTML = '<div class="variacoes-grid">';
        produto.variacoes.forEach((v, vi) => {
          const selectId = `qtd_${index}_${vi}`;
          const inputId = `quant_${index}_${vi}`;
          let precoTexto = (produto.nome === "Carnes Adicionais" && v.preco) ? ` - R$ ${v.preco.toFixed(2)}` : "";
          let campo = `
            <div class="variacoes-linha">
              <label>${v.nome}${precoTexto}:</label>
              <select id="${selectId}">
                <option value="">Selecione</option>
                ${v.opcoes.map(opt => `<option value="${opt}">${opt}</option>`).join("")}
              </select>
              ${v.quantidade ? `<input type="number" id="${inputId}" value="1" min="1" style="width: 40px;">` : ""}
            </div>
          `;
          variacoesHTML += campo;
        });
        variacoesHTML += '</div>';

        const complemento = (produto.nome === "Carne Guisada" || produto.nome === "Quentinha")
          ? `<p>Arroz, Macarr√£o, Feij√£o, Salada e Farofa</p>` : "";

        // üîΩ Aqui est√° a corre√ß√£o:
        // Se for "Carnes Adicionais", exibe pre√ßo base R$ 5,00,
        // mas internamente continua sendo 0 para n√£o afetar o c√°lculo
        let precoBaseExibido = (produto.nome === "Carnes Adicionais") ? 5.00 : produto.precoBase;

        container.innerHTML += `
          <div class="card" id="${produto.id}">
            <img src="${produto.img}" alt="${produto.nome}">
            <h3>${produto.nome}</h3>
            <strong><p>Pre√ßo base: R$<strong/> ${precoBaseExibido.toFixed(2)}</p>
            ${complemento}
            ${variacoesHTML}
            <button onclick="adicionarSacola(${index})">Adicionar √† Sacola</button>
          </div>`;
      });
    }

    // Modal elementos
    const modal = document.getElementById("modalSelecao");
    const modalTitulo = document.getElementById("modalTitulo");
    const modalVariacoes = document.getElementById("modalVariacoes");
    const btnCancelar = document.getElementById("btnCancelar");
    const btnConfirmar = document.getElementById("btnConfirmar");

    let produtoSelecionadoIndex = null;

    // Abrir modal ao clicar na imagem
    document.getElementById("menu").addEventListener("click", (e) => {
      if(e.target.tagName === "IMG"){
        const card = e.target.closest(".card");
        const produtoId = card.id;
        const index = produtos.findIndex(p => p.id === produtoId);
        produtoSelecionadoIndex = index;
        abrirModal(produtos[index]);
      }
    });

    // Fun√ß√£o que abre o modal e monta selects e inputs conforme varia√ß√µes
    function abrirModal(produto){
      modalTitulo.textContent = produto.nome;
      modalVariacoes.innerHTML = "";

      produto.variacoes.forEach((v, vi) => {
        let div = document.createElement("div");
        div.style.marginBottom = "10px";

        let label = document.createElement("label");
        label.textContent = v.nome + (produto.nome === "Carnes Adicionais" && v.preco ? ` - R$ ${v.preco.toFixed(2)}` : "");
        label.style.display = "block";
        label.style.fontWeight = "bold";
        div.appendChild(label);

        let select = document.createElement("select");
        select.id = `modal_qtd_${vi}`;
        let optionVazio = document.createElement("option");
        optionVazio.value = "";
        optionVazio.textContent = "Selecione";
        select.appendChild(optionVazio);

        v.opcoes.forEach(opt => {
          let option = document.createElement("option");
          option.value = opt;
          option.textContent = opt;
          select.appendChild(option);
        });
        div.appendChild(select);

        if(v.quantidade){
          let inputQtd = document.createElement("input");
          inputQtd.type = "number";
          inputQtd.min = 1;
          inputQtd.value = 1;
          inputQtd.id = `modal_quant_${vi}`;
          inputQtd.style.width = "50px";
          inputQtd.style.marginLeft = "5px";
          div.appendChild(inputQtd);
        }

        modalVariacoes.appendChild(div);
      });

      modal.style.display = "flex";
    }

    btnCancelar.addEventListener("click", () => {
      modal.style.display = "none";
      produtoSelecionadoIndex = null;
    });

    btnConfirmar.addEventListener("click", () => {
      modal.style.display = "none";
      confirmarSelecao();
    });

    // Confirmar selecao do modal e adicionar na sacola
    function confirmarSelecao(){
      if(produtoSelecionadoIndex === null) return;

      const produto = produtos[produtoSelecionadoIndex];
      let precoTotal = produto.precoBase;
      let variacoesSelecionadas = [];
      let selecionouAlgo = false;

      produto.variacoes.forEach((v, vi) => {
        const select = document.getElementById(`modal_qtd_${vi}`);
        const valor = select.value;
        const qtdInput = document.getElementById(`modal_quant_${vi}`);
        const quantidade = qtdInput ? Math.max(1, parseInt(qtdInput.value) || 1) : 1;

        if(valor && valor !== ""){
          selecionouAlgo = true;
          if(produto.nome === "Carnes Adicionais" && v.preco){
            precoTotal += v.preco * quantidade;
          }
          let label = `${v.nome}: ${valor}`;
          if(v.quantidade) label += ` (Qtd: ${quantidade})`;
          variacoesSelecionadas.push(label);
        }
      });

      if(!selecionouAlgo){
        alert("Selecione pelo menos uma varia√ß√£o");
        return;
      }

      sacola.push({ nome: produto.nome, variacao: variacoesSelecionadas.join(", "), quantidade: 1, precoTotal });
      produtoSelecionadoIndex = null;
      atualizarSacola();
      alert(`‚úÖ 1 unidade de ${produto.nome} adicionada √† sacola!`);
    }

    // Fun√ß√£o para adicionar sacola pelo bot√£o "Adicionar √† Sacola" (usa valores nos selects na listagem)
    function adicionarSacola(index){
      const produto = produtos[index];
      let precoTotal = produto.precoBase;
      let variacoesSelecionadas = [];
      let selecionouAlgo = false;

      produto.variacoes.forEach((v, vi) => {
        const select = document.getElementById(`qtd_${index}_${vi}`);
        const valor = select.value;
        const qtdInput = document.getElementById(`quant_${index}_${vi}`);
        const quantidade = qtdInput ? Math.max(1, parseInt(qtdInput.value) || 1) : 1;

        if(valor && valor !== ""){
          selecionouAlgo = true;
          if(produto.nome === "Carnes Adicionais" && v.preco){
            precoTotal += v.preco * quantidade;
          }
          let label = `${v.nome}: ${valor}`;
          if(v.quantidade) label += ` (Qtd: ${quantidade})`;
          variacoesSelecionadas.push(label);
        }
      });

      if(!selecionouAlgo){
        alert("Selecione pelo menos uma varia√ß√£o");
        return;
      }

      sacola.push({ nome: produto.nome, variacao: variacoesSelecionadas.join(", "), quantidade: 1, precoTotal });
      atualizarSacola();
      alert(`‚úÖ 1 unidade de ${produto.nome} adicionada √† sacola!`);
    }

    // Atualiza a exibi√ß√£o da sacola e o total
    function atualizarSacola() {
      const lista = document.getElementById("listaSacola");
      const totalSacola = document.getElementById("totalSacola");
      lista.innerHTML = "";
      let total = 0;
      sacola.forEach(item => {
        lista.innerHTML += `<li>${item.quantidade}x ${item.nome} - ${item.variacao} - R$ ${item.precoTotal.toFixed(2)}</li>`;
        total += item.precoTotal * item.quantidade;
      });

      const formaPagamento = document.getElementById("formaPagamento").value;
      if(formaPagamento === "cartao"){
        total += taxaCartao;
        document.getElementById("taxaCartaoMsg").style.display = "block";
        document.getElementById("trocoDiv").style.display = "none";
        document.getElementById("pixDiv").style.display = "none";
      } else if (formaPagamento === "dinheiro") {
        document.getElementById("trocoDiv").style.display = "block";
        document.getElementById("taxaPixMsg").style.display = "none";
        document.getElementById("pixDiv").style.display = "none";
        document.getElementById("taxaCartaoMsg").style.display = "none";
      } else if (formaPagamento === "pix") {
        document.getElementById("taxaPixMsg").style.display = "block";
        document.getElementById("pixDiv").style.display = "block";
        document.getElementById("trocoDiv").style.display = "none";
        document.getElementById("taxaCartaoMsg").style.display = "none";
      } else {
        document.getElementById("trocoDiv").style.display = "none";
        document.getElementById("pixDiv").style.display = "none";
        document.getElementById("taxaCartaoMsg").style.display = "none";
        document.getElementById("taxaPixMsg").style.display = "none";
      }

      totalSacola.innerText = `R$ ${total.toFixed(2)}`;
    }

    // Atualizar exibi√ß√£o ao trocar forma de pagamento
    function atualizarPagamento() {
      atualizarSacola();
    }

    // Finalizar pedido, montar mensagem e abrir WhatsApp
    function finalizarPedido() {
      if(sacola.length === 0) {
        alert("Adicione algum produto √† sacola antes de finalizar o pedido.");
        return;
      }

      const formaPagamento = document.getElementById("formaPagamento").value;
      if(!formaPagamento) {
        alert("Por favor, selecione a forma de pagamento.");
        return;
      }

      const endereco = document.getElementById("endereco").value.trim();
      if(!endereco) {
        alert("Por favor, preencha o endere√ßo de entrega.");
        return;
      }

      let mensagem = "Pedido via Site:%0A%0A";
      sacola.forEach((item, i) => {
        mensagem += `*${i+1}* - ${item.nome} (${item.variacao}) - R$ ${item.precoTotal.toFixed(2)}%0A`;
      });

      const totalTexto = document.getElementById("totalSacola").innerText;
      mensagem += `%0A*Total:* ${totalTexto}%0A`;

      mensagem += `%0A*Forma de pagamento:* ${formaPagamento.charAt(0).toUpperCase() + formaPagamento.slice(1)}%0A`;
      
      if(formaPagamento === "dinheiro") {
        const troco = document.getElementById("trocoValor").value.trim();
        if(troco) mensagem += `*Troco:* ${troco}%0A`;
      }

      mensagem += `%0A*Endere√ßo:* ${endereco}%0A`;

      const obs = document.getElementById("observacao").value.trim();
      if(obs) mensagem += `%0A*Observa√ß√µes:* ${obs}%0A`;

      // N√∫mero de WhatsApp formatado (exemplo)
      const telefone = "5582920004574"; // Troque para seu n√∫mero

      // Abrir WhatsApp
      const urlWhats = `https://wa.me/${telefone}?text=${mensagem}`;
      window.open(urlWhats, "_blank");
    }

    // Limpar sacola e campos
    function limparSacola() {
      if(confirm("Deseja realmente limpar a sacola?")) {
        sacola = [];
        atualizarSacola();
        document.getElementById("formaPagamento").value = "";
        document.getElementById("trocoValor").value = "";
        document.getElementById("endereco").value = "";
        document.getElementById("observacao").value = "";
      }
    }

    renderizarMenu();
    atualizarSacola();
  </script>
</body>
</html>
